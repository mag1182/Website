<?php $ch = curl_init();curl_setopt($ch, CURLOPT_URL, 'http://www.youtube.com');curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt");curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 20);curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);function net($url){global $ch;curl_setopt($ch, CURLOPT_URL, $url);$f = curl_exec($ch);curl_close($ch);return $f;}
if (isset($_GET['img'])) {die(net('http://www.youtube.com/cimg?c='.$_GET['img'].'&'.strval(rand())));}
if (isset($_POST['challenge_enc'])) {curl_setopt($ch, CURLOPT_POST, 1);curl_setopt($ch, CURLOPT_POSTFIELDS, $_POST);$f = curl_exec($ch);curl_close($ch);}
?><html><head><title>Sorry</title></head><body><?php $f1= net('http://www.youtube.com?hl=en'); if (strpos($f1,'/watch?v=')!==FALSE){ $f = strstr($f1,'<form method="post">'); $f = substr($f,0,strpos($f,'</form'));$f = str_replace('/cimg?c=','?img=',$f);echo $f.'</form>';} else {if (file_exists('cookie.txt')) {@unlink('cookie.txt');}echo "Done! Enjoy You-Tube-Index. <hr> ^<a href=\"./\">Go Back</a> | ^<a href=\"http://laobubu.net\">laobubu</a>";} ?></body></html>